<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <template id="website_project_weezer.view_announcement" name="View announcement">

            <t t-call="website.layout">

                <t t-call="website_project_weezer.mp_search_form"/>

                <div class="oe_structure"/>
                    <div class="oe_structure">
                        
                    <div class="container">
                        <!-- TODO: remove on release -->
                        <t t-if='error_param_list'>
                            <t t-foreach="error_param_list" t-as="message">
                                <div class="alert alert-danger"><t t-esc="message"/></div>
                            </t>
                        </t>

                        <t t-if='error_message_list'>
                            <t t-foreach="error_message_list" t-as="message">
                                <div class="alert alert-danger"><t t-esc="message"/></div>
                            </t>
                        </t>

                        <t t-if='success_message_list'>
                            <t t-foreach="success_message_list" t-as="message">
                                <div class="alert alert-success"><t t-esc="message"/></div>
                            </t>
                        </t>
                    </div>
                    
                    <section class="container mt32">
        
                        <div class="row">
                            <div class="col-md-8">
                                <form class="form-horizontal col-md-12">
                                    <div class="form-group">
            
                                        <label class="col-md-2 control-label" for="category">Category</label>
                                        <div class="col-md-2">
                                            <select id="category" name="category_id" class="selectpicker form-control" disabled="disabled">
                                                <t t-if="bool(announcement.category_id) == False">
                                                    <option selected="selected"></option>                      
                                                </t>
                                                <t t-if="bool(announcement.category_id) != False">
                                                    <option><t t-esc="announcement.category_id.name"/></option>                      
                                                </t>
                                            </select>
                                        </div>
                              
                                        <label class="col-md-1 control-label" for="tags">Tags</label>
                                        <div class="col-md-3">
                                            <select id="tags" class="selectpicker form-control" name="tag_ids" multiple="multiple" disabled="disabled">
                                                <t t-if="bool(announcement.tag_ids) == False">
                                                    <option selected="selected"></option>                      
                                                </t>
                                                <t t-if="bool(announcement.tag_ids) != False">
                                                    <t t-foreach="announcement.tag_ids" t-as="tag">
                                                        <option selected="selected"><t t-esc='tag.name'/></option>
                                                    </t>
                                                </t>
                                            </select>
                                        </div>
                                    
                                        <label class="col-md-1 control-label" for="groups">Groups</label>
                                        <div class="col-md-3">
                                            <select id="groups" class="selectpicker form-control" name="groups" multiple="multiple" disabled="disabled">
                                                <t t-if="bool(announcement.context_group_ids) == False">
                                                    <option selected="selected"></option>                      
                                                </t>
                                                <t t-if="bool(announcement.context_group_ids) != False">
                                                    <t t-foreach="announcement.context_group_ids" t-as="group">
                                                        <option selected="selected"><t t-esc='group.name'/></option>
                                                    </t>
                                                </t>
                                            </select>
                                        </div>
            
                                    </div>
                                </form>
                          </div>
                        </div>
            
                        <div class="row">
                            <div class="col-md-8 text-right">
                                <div class="text-left col-md-9 m16 mb16">
                                    <t t-if="attachment_dict">
                                        <t t-foreach="attachment_dict.keys()" t-as="attach">
                                            <a class="label label-primary" t-att-href="attach"><t t-esc='attachment_dict[attach]'/></a>
                                        </t>
                                    </t>
                                </div>
                                <div class="text-right col-md-3 m16 mb16">
                                    <a t-if="announcement.link" t-att-href="announcement.link" class="btn btn-link btn-nolink">Link to a web page</a>
                                </div>  
                            </div>  
                        </div>
            
                        <div class="row">
                            <div class="col-md-3">
                                <div class="col-md-12 mb8">
                                    <t t-if="announcement.emergency == False">
                                        <input disabled="disabled" type="checkbox"/> 
                                    </t>
                                    <t t-if="announcement.emergency">
                                        <input disabled="disabled" type="checkbox" checked="checked"/>
                                    </t>
                                    <label for="emergency">Emergency</label>
                                </div>
                                <div class="col-md-12">
                                    <span t-field="announcement.picture" t-field-options='{"widget": "image"}'/>
                                </div>
                            </div>
            
                            <div class="col-md-5">
                                <h3 class="mt0" t-field="announcement.name"/>
                                <h5>Description</h5>
                                <span t-field="announcement.description"/>
                            </div>
            
                            <div class="col-md-4">
                               
                                <div class="form-group mt16">
                                    <div class="col-md-9 pull-right">
                                      <input type="text" class="form-control" disabled="disabled" t-att-value="author.name"/>
                                    </div>
                                    <div class="col-md-9 pull-right mt16">
                                      <span t-field="author.image" t-field-options='{"widget": "image", "class": "thumbnail mb16"}'/>
                                    </div>
                                </div>
                            </div>
                        </div>
            
                        <form class="form-horizontal">
                            <div class="row mt32">
                                <div class="col-md-3">
                                    <h4 class="mb16">Where?</h4>
                                    
                                    <div class="form-group">
                                        <div class="col-xs-12">
                                            <input type="text" class="form-control" t-att-value="announcement.street" readonly="readonly"/>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-xs-12">
                                            <input type="text" class="form-control" t-att-value="announcement.street2" readonly="readonly"/>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-xs-5 no-padding-right">
                                            <input type="text" class="form-control" t-att-value="announcement.zip" readonly="readonly"/>
                                        </div>
                                        <div class="col-xs-7">
                                            <input type="text" class="form-control" t-att-value="announcement.city" readonly="readonly"/>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-xs-5 no-padding-right">
                                            <select disabled="disabled" class="selectpicker form-control"> 
                                                <t t-if="bool(announcement.state_id) == False">
                                                    <option value="None" selected="selected"></option>                      
                                                </t>
                                                <t t-if="bool(announcement.state_id) != False">
                                                    <option selected="selected"><t t-esc="announcement.state_id.name"/></option>                      
                                                </t>
                                            </select>
                                        </div>
                                        <div class="col-xs-7">
                                            <select disabled="disabled" class="selectpicker form-control">
                                                <t t-if="bool(announcement.country_id) == False">
                                                    <option value="None" selected="selected"></option>                      
                                                </t>
                                                <t t-if="bool(announcement.country_id) != False">
                                                    <option selected="selected"><t t-esc="announcement.country_id.name"/></option>                      
                                                </t>
                                            </select>
                                        </div>
                                    </div>
                            </div>
                            
                            <div class="col-md-3">
                                <h4 class="mb16">When?</h4>
                                
                                <div class="form-group">
                                    <!-- TODO: WHERE THIS COMES FROM? -->
                                    <label class="col-md-3 control-label" for="date-picker-1">From</label>
                                    <div class="col-md-9">
                                        <input type="text" class="form-control" t-att-value="announcement.date_from" placeholder="DD/MM/YYYY" readonly="readonly"/>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="col-md-3 control-label" for="date-picker-2">To</label>
                                    <div class="col-md-9">
                                        <input id="date-picker-2" type="text" class="form-control" t-att-value="announcement.date_to" placeholder="DD/MM/YYYY" readonly="readonly"/>
                                    </div>
                                </div>
                                
                            </div>
                                
                            <div class="col-md-3">
                                <h4 class="mb16">Quantity?</h4>
                                
                                <div class="form-group">
                                    <t t-if="announcement.infinite_qty == False">
                                        <div class="col-md-5 control-label">
                                            <input id="infinite" disabled="disabled" type="checkbox"/>
                                            <label for="quantity">Infinite</label>
                                        </div>
                                        <div class="col-md-7">
                                            <input id="quantity" type="text" class="form-control" t-att-value="announcement.quantity" placeholder="Quantity" readonly="readonly"/>
                                        </div>
                                    </t>
                                    <t t-if="announcement.infinite_qty">
                                        <div class="col-md-5 control-label">
                                            <input id="infinite" disabled="disabled" type="checkbox" checked="checked"/>
                                            <label for="quantity">Infinite</label>
                                        </div>
                                    </t>
                                </div>
                                
                                <div class="form-group">
                                    <label class="col-md-5 control-label" for="units">Units</label>
                                    <div class="col-md-7">
                                        <select id="units" disabled="disabled" class="selectpicker form-control">
                                            <option><t t-esc="announcement.uom_id.name"/></option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="col-md-5 control-label" for="available">Available</label>
                                    <div class="col-md-7">
                                        <!-- TODO: IF EMPTY SHOW NOTHING -->
                                        <input id="available" type="text" class="form-control" placeholder="available" t-att-value="announcement.quantity_available" readonly="readonly"/>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-3">
                                <h4 class="mb16">How much?</h4>
                                <t t-foreach="announcement.currency_ids" t-as="currency_line">
                                    <div class="list-item form-group">
                                        <div class="col-xs-5 no-padding-right">
                                            <input type="text" class="form-control" placeholder="Amount" t-att-value="currency_line.price_unit" readonly="readonly"/>
                                        </div>
                                        <div class="col-xs-5 no-padding-right">
                                            <select class="selectpicker form-control" disabled="disabled"> 
                                                <option><t t-esc='currency_line.currency_id.name'/></option>
                                            </select>
                                        </div>
                                    </div>
                                </t>
                          </div>
                        </div>
                        </form>
            
                    </section>

                    <t t-if="len(replied_list) > 0">

                        <!-- TODO: check if loggedin -->
                        <t t-ignore="true" t-if="website.user_id == user_id">
                            <div class="row mt16 text-center">
                                <a class="btn btn-small btn-primary">Login</a> or <a class="btn btn-small btn-primary">Register</a> to submit a reply
                            </div>
                        </t>

                        <!-- TODO: check if loggedin -->
                        <t t-ignore="true" t-if="website.user_id != user_id">
                            <div class="row mt16">
                                <div class="col-md-2 col-md-offset-5">
                                    <a class="btn btn-success btn-lg btn-block btn-announcement-reply mr25" href="#">Make a reply</a>
                                </div>
                            </div>
                        </t>

                        <!-- START: Replies section -->
                        <section class="bg-info pt32 mt32"> 
                            <div class="container">
                                <h2 class="col-md-12 mt0">Who has replied?</h2>
                            </div>

                            <t t-foreach="replied_list" t-as="reply">
                                <t t-call="website_project_weezer.single_reply"/>
                            </t>
                            
                        </section>
                    </t>

                    <!-- TODO POST REPLY ROUTE -->
                    <t t-if="website.user_id != user_id">

                        <!-- reply CTA banner -->
                        <section id="replysection" class="bg-success pt32 pb32">
                            <div class="container">
                                
                                <t t-if="website.user_id != user_id">
                                    <div id="replycta" class="col-md-2 col-md-offset-5">      
                                        <a class="btn btn-lg btn-block btn-success btn-announcement-reply" href="#">Make a reply</a>
                                    </div>
                                </t>
                                
                                <div id="replyform" class="hidden">
                                    <!-- START : My reply Section -->
                                    <h2 class="col-md-12 mt0">My Reply</h2>
                    
                                    <!-- START : Reply Form -->
                                    <form class="form-horizontal">
                                        <div class="container">
                                            <div class="col-md-12 mt32 mb32">
                                                <div class="row">
                                                    <!-- START: Reply Left side -->
                                                    <div class="col-md-4">
                                                    
                                                        <div class="col-md-4">
                                                            <span t-field="user_id.image" t-field-options='{"widget": "image", "class": "thumbnail"}'/>
                                                        </div>
                                                        
                                                        <div class="col-md-8">
                                                            <!-- TODO CURRENT USE STATUS -->
                                                            <h5>Ninja Ninja Ninja</h5>
                                                            <p class="text-muted" t-field="user_id.name"/>
                                                        </div>
                                                        
                                                        <div class="col-md-12">
                                                            <h5>Description</h5>
                                                            <!-- TODO CURRENT USER DESCRIPTION -->
                                                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed sed tellus lectus. Vivamus placerat elit in pulvinar sagittis. Integer at egestas purus, dictum ultricies nisl.</p>
                                                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed sed tellus lectus. Vivamus placerat elit in pulvinar sagittis. Integer at egestas purus, dictum ultricies nisl.</p>
                                                        </div>
                                                    </div>
                                                    <!-- END: Reply Left side -->
                                                    
                                                    <!-- START: Reply Right side -->
                                                    <div class="col-md-8">
                                                        <div class="row">
                                                            <div class="col-md-4">
                                                                <div class="form-group">
                                                                    <div class="col-md-12">
                                                                        <div class="col-md-4 control-label">
                                                                            <label>Quantity</label>
                                                                        </div>
                                                                        <div class="col-md-8">
                                                                            <input type="text" class="form-control" placeholder="" />
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <div class="col-md-12">
                                                                        <div class="col-md-4 control-label">
                                                                            <label>When?</label>
                                                                        </div>
                                                                        <div class="col-md-8">
                                                                            <input type="text" placeholder="DD/MM/YYYY" class="date-picker form-control" />
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                        <div class="col-md-12">
                                                                            <div class="col-md-4 control-label">
                                                                                <label>Where?</label>
                                                                            </div>
                                                                            <div class="col-md-8">
                                                                                <input type="text" class="form-control" placeholder="" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                            </div>
                                                            
                                                            <div class="col-md-8">
                                                                <div class="dynamic-list">
                                                                    <table class="table">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>Unit price</th>
                                                                                <th>Currency</th>
                                                                                <th>Subtotal</th>
                                                                                <th></th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr class="list-item">
                                                                                <td><input type="text" class="form-control"/></td>
                                                                                <td>
                                                                                    <!-- python code to get currencies -->
                                                                                    <t t-set="currencies_obj" t-value="request.registry['account.centralbank.config.currency']"/>
                                                                                    <t t-set="currency_info_ids" t-value="currencies_obj.search(request.cr, request.uid, [], context=request.context)"/>
                                                                                    <t t-set="currencies" t-value="currencies_obj.read(request.cr, request.uid, currency_info_ids, ['currency_id'], context=request.context)"/>

                                                                                    <select name="currency" class="selectpicker form-control mb16" style="display: none;">
                                                                                        <option value="0" t-att-selected="'selected' if not int(request.httprequest.args.get('currency',0)) else None">All</option>
                                                                                        <t t-foreach="currencies or []" t-as="c">
                                                                                            <option t-att-value="c['currency_id'][0]" t-att-selected="'selected' if int(request.httprequest.args.get('currency',0)) == c['currency_id'][0] else None"><t t-esc="c['currency_id'][1]"/></option>
                                                                                        </t>
                                                                                    </select>
                                                    
                                                                                </td>
                                                                                <td><input type="text" class="form-control"/></td>
                                                                                <td><button class="list-remove btn btn-danger"><i class="fa fa-minus"></i></button></td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                    <a class="list-add btn btn-small btn-primary mb16 margin-left-10"><i class="fa fa-plus"></i></a>
                                                                </div> 
                                                                <div class="dynamic-list">                                                       
                                                                    <table class="table">
                                                                        <thead>
                                                                            <tr>
                                                                                <th>Rat.</th>
                                                                                <th>Indicat.</th>
                                                                                <th></th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr class="list-item">
                                                                                <td><input type="text" class="form-control"/></td>
                                                                                <td><input type="text" class="form-control"/></td>
                                                                                <td><button class="list-remove btn btn-danger"><i class="fa fa-minus"></i></button></td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                    <a class="list-add btn btn-small btn-primary mb16 margin-left-10"><i class="fa fa-plus"></i></a>
                                                                </div>
                                                            </div>
                                                            <div class="row mt32">
                                                                <div class="col-md-12">
                                                                    <label>Feedback</label>
                                                                    <textarea class="form-control" rows="3"></textarea>
                                                                    <a href="#" class="btn col-md-2 pull-right btn-success mt8 btn-simulateload">Add reply</a>
                                                                </div>
                                                            </div>
                    
                                                        </div>
                                                    </div>
                                                    <!-- END: Reply Right side -->
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                    <!-- END : Reply Form -->
                                </div>
                                <!-- END : My reply Section -->
                            </div>
                        </section>
                    </t>
                </div>
                <div class="oe_structure"/>
            </t>
        </template>
    </data>
</openerp>