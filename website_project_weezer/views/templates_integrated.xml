<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
    	<template id="layout" name="Weezer Layout" inherit_id="website.layout">
    		<xpath expr="//header" position="replace">
    			<header>
				    <nav class="navbar navbar-default mb0" role="navigation">
				        <div class="container">
				            <div class="col-md-12">
				                <div class="row">
				                    <!-- Brand and toggle get grouped for better mobile display -->
				                    <div class="navbar-header">
				                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				                        <span class="sr-only">Toggle navigation</span>
				                        <span class="icon-bar"></span>
				                        <span class="icon-bar"></span>
				                        <span class="icon-bar"></span>
				                        </button>
				                        <!-- essential element for logo - .navbar-brand -->
				                        <!-- class cannot be changed -->
				                        <a href="/" class="navbar-brand">
				                        	<img src="/website_project_weezer/static/src/assets/navbar-logo-exchange.png"/>
				                        </a>
				                    </div>
				                    <!-- Collect the nav links, forms, and other content for toggling -->
				                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				                        <ul class="nav navbar-nav" id="top_menu">
				                            <t t-foreach="website.menu_id.child_id" t-as="submenu">
			                                    <t t-call="website.submenu"/>
			                                </t>
				                            <li><a href="/marketplace/announcement_detail/new"><span class="fa fa-pencil"></span></a></li>
				                            <li><a href="#" class="btn-nolink"><span class="fa fa-usd"></span></a></li>
				                        </ul>
				                        <ul class="nav navbar-nav pull-right">
				                            <li><a href="members-list.html"><span class="fa fa-users"></span></a></li>
				                            <li><a href="/page/website.contactus" class="btn-nolink"><span class="fa fa-envelope"></span></a></li>
				                            <li><a href="profile.html"><span class="fa fa-user"></span></a></li>
				                        </ul>
				                    </div>
				                    <!-- /.navbar-collapse -->
				                </div>
				            </div>
				        </div>
				        <!-- /.container-fluid -->
				    </nav>
				</header>
    		</xpath>
    		<xpath expr="//footer" position="replace">
    			<footer>

	                <div id="footer_container" class="container">
	                    
	                    <div class="col-md-12 mb16 mt16">
	                        <ul class="nav nav-pills pull-right">
	                            <li><a href="/">Home</a></li>
	                            <li class="active"><a href="/marketplace/search">Market Place</a></li>
	                            <li><a href="#" class="btn-nolink">Our Activity</a></li>
	                        </ul>
	                        <a href="/page/website.contactus" class="btn btn-primary btn-contact-us pull-left btn-nolink" type="button">Contact Us</a>  
	                        <h4 class="text-center">See the <a href="#" class="btn-nolink">FAQ</a> or <a href="register.html">Sign up now, it's FREE</a></h4>
	                    </div>                    
	                    
	                    <div class="clearfix"></div>
	                    
	                    <div class="col-md-3">
	                        <h4 class="page-header">Learn more</h4>
	                        <ul class="nav">
	                            <li><a href="#" class="btn-nolink">How It Works</a></li>
	                            <li><a href="#" class="btn-nolink">Feature Tour</a></li>
	                            <li><a href="#" class="btn-nolink">Sign Up</a></li>
	                            <li><a href="#" class="btn-nolink">Set It Up</a></li>
	                            <li><a href="#" class="btn-nolink">About Us</a></li>
	                        </ul>
	                    </div>

	                    <div class="col-md-3">
	                        <h4 class="page-header">Support</h4>
	                        <ul class="nav">
	                            <li><a href="#" class="btn-nolink">FAQ</a></li>
	                            <li><a href="#" class="btn-nolink">Contact Us</a></li>
	                        </ul>
	                    </div>


	                    <div class="col-md-3">
	                        <h4 class="page-header">Legal</h4>
	                        <ul class="nav">
	                            <li><a href="#" class="btn-nolink">Terms of Service</a></li>
	                            <li><a href="#" class="btn-nolink">Privacy Policy</a></li>
	                        </ul>
	                    </div>
	                    
	                    <div class="col-md-3">
	                        <h4 class="page-header">Follow Us</h4>
	                        <ul class="nav">
	                            <li><a href="#" class="btn-nolink">Twitter</a></li>
	                            <li><a href="#" class="btn-nolink">Facebook</a></li>
	                            <li><a href="#" class="btn-nolink">Blog</a></li>
	                        </ul>
	                    </div>
	                    
	                    <div class="clearfix"></div>
	                    <h5 class="footer-title">Wezer, designed by <a href="http://www.valeureux.org" class="footer-logo logo-valeureux">Valeureux</a>, common good tools fabrics, based on <a href="http://www.odoo.org" class="footer-logo logo-odoo">Odoo</a></h5>
	                    
	                </div>
	            </footer>
    		</xpath>
    	</template>
    	<template id="mp_single_item">
    		<div class="row">
                <div class="col-md-12 thumbnail mb32">
                    <div class="col-md-3 mt16">
                        <div class="col-md-12">
                            <div class="row" t-field="item.picture" t-field-options='{"widget": "image", "class": "img img-responsive thumbnail" }'/>
                            <div class="row">
                                <p class="text-muted text-center mt8"><span t-field="item.partner_id.name"/></p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-9 mt16">
                        <div class="col-md-12">
                            <div class="row">
                                <h3 class="mt0"><span t-field="item.name"/></h3>
                                <h5>Description</h5>
                            </div>
                            <div class="row">
                                <p><span t-esc="format_text(item.description)"/></p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-3 mt16">
                        <t t-foreach="item.currency_ids" t-as="price">
                            <p class="text-muted text-right"><span class="label label-default"><span t-field="price.price_unit"/> <span t-field="price.currency_id.name"/></span></p>
                        </t>
                        <p class="text-muted text-right"><span class="label label-default"> <span t-field="item.quantity_available"/> <span t-field="item.uom_id.name"/></span></p>
                        <p class="text-muted text-right"><span class="label label-default" t-field="item.expiration_date"/></p>
                        <p class="text-muted text-right"><span class="label label-default" t-field="item.city"/></p>
                        <p class="text-muted text-right"><span class="badge" t-esc="len(item.proposition_ids)"></span> replies</p>
                    </div>
                </div>
            </div>
    	</template>
    	<template id="mp_search">
            <t t-call="website.layout">
                <t t-call="website_project_weezer.mp_search_form"/>
                <div id="wrap" class="container">
                    <div class="oe_structure"/>
                    <div class="oe_structure">
                        <section class="clearfix">

        					<h3 class="text-center col-md-6 page-header mb8">Our Wants</h3>
        					<h3 class="text-center col-md-6 page-header mb8">Our Offers</h3>
        					
        					<!-- START: Scrollable -->
        					<div class="col-md-12 scrollable page-header pb8">
        						<div class="scrollbar"><div class="track"><div class="thumb"></div></div></div>

                                    <div class="viewport" style="height: 690px; overflow: hidden;">
                                        <div class="overview">

        									<!-- START: Our wants -->
                                            <div class="col-md-6">
                                            	<div class="col-md-12">
                                            		<t t-foreach="result['wants'] or []" t-as="item">
                                            			<t t-call="website_project_weezer.mp_single_item"/>
                                            		</t>
        	                                	</div> 
                                        	</div> 
                                        	<!-- END: Our wants -->
                                        	 
        									<!-- START: Our offers -->
                                            <div class="col-md-6">
                                            	<div class="col-md-12">
                                            		<t t-foreach="result['offers'] or []" t-as="item">
        												<t t-call="website_project_weezer.mp_single_item"/>
                                            		</t>
        	                                	</div> 
                                        	</div> 
                                        	<!-- END: Our offers -->   
                                
                                    	</div>
                                	</div>
        	                    </div>
                            <!-- END: Scrollable -->
        					<div class="col-md-12 mt16 mb32">
                                <t t-if="page &gt; 1">
                                    <a t-att-href="prev_url" class="btn text-center btn-primary pull-left">Previous page</a>
                                </t>
                                <t t-if="page &lt; page_count">
                            	   <a t-att-href="next_url" class="btn text-center btn-primary pull-right">Next page</a>
                                </t>
        					</div>
                        </section>
                    </div>
                    <div class="oe_structure"/>
                </div>
            </t>
        </template>
        <template id="mp_search_form" name="Marketplace Search">
            <section>
                <form id="searchform" class="form" method="GET" action="/marketplace/search">
                    <section class="jumbotron mb32 pt32 pb16">
                        <div class="container">
                            <div class="row">
                                <div class="col-md-2 pt8">
                                    <img src="/website_project_weezer/static/src/assets/logo-l-exchange.png" class="img img-responsive"/>
                                </div>
                                <div class="col-md-2 pt32">
                                    <h4 class="pull-right">I'm searching</h4>
                                </div>
                                <div class="col-md-8 pt32">
                                    <div class="form-group">
                                        <div class="col-md-3">
                                            <select class="selectpicker form-control" name="type" style="display: none;">
                                                <option value="to_get" t-att-selected="'selected' if request.httprequest.args.get('type') == 'to_get' else None">To get</option>
                                                <option value="to_offer" t-att-selected="'selected' if request.httprequest.args.get('type') == 'to_offer' else None">To offer</option>
                                                <option value="to_find" t-att-selected="'selected' if request.httprequest.args.get('type') == 'to_find' else None">To find</option>
                                            </select>
                                        </div>

                                        <div class="col-md-6">
                                            <input type="search" name="name" class="form-control" placeholder="Search" t-att-value="request.httprequest.args.get('name','')"/>
                                        </div>
                                        <!-- python code to get categories -->
                                        <t t-set="ann_categories_obj" t-value="request.registry['marketplace.announcement.category']"/>
                                        <t t-set="ann_categories" t-value="ann_categories_obj.name_search(request.cr, request.uid, '', [], context=request.context)"/>
                                        <div class="col-md-3">
                                            <select name="category" class="selectpicker form-control" placeholder="Category" style="display: none;">
                                                <option value="0" t-att-selected="'selected' if not int(request.httprequest.args.get('category',0)) else None">All</option>
                                                <t t-foreach="ann_categories or []" t-as="c">
                                                    <option t-att-value="c[0]" t-att-selected="'selected' if int(request.httprequest.args.get('category',0)) == c[0] else None"><t t-esc="c[1]"/></option>
                                                </t>
                                            </select>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- filters -->
                        <div class="container">
                            <div class="row">
                                <div class="col-md-12 text-center pt8 pb16">
                                    <div class="subtitle-search">
                                        <div class="border"></div>
                                        <h2 class="text-center">In</h2>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <div class="col-md-2 col-md-offset-1">
                                            <label class="control-label"> </label>
                                            <label class="sr-only">From Who?</label>
                                            <input name="from_who" id="filter-who" type="text" placeholder="From who?" class="form-control mb16" autocomplete="on" t-att-value="request.httprequest.args.get('from_who','')"/>
        
                                            <label class="sr-only">Where?</label>
                                            <input name="city" id="filter-where" type="text" placeholder="Where?" class="form-control" autocomplete="on" t-att-value="request.httprequest.args.get('city','')"/>
                                        </div>
        
                                        <div class="col-md-2">
                                                <label class="control-label text-center">When?</label>
                                                <label class="sr-only">From</label>
                                                <div class="input-group mb16">
                                                    <input name="date_from" id="filter-from" type="text" placeholder="From" class="date-picker form-control" t-att-value="request.httprequest.args.get('date_from','')"/>
                                                    <label for="filter-from" class="input-group-addon btn btn-default"><span class="fa fa-calendar"></span></label>
                                                </div>
                                                <label class="sr-only">To</label>
                                                <div class="input-group">
                                                    <input name="date_to" id="filter-to" type="text" placeholder="To" class="date-picker form-control" t-att-value="request.httprequest.args.get('date_to','')"/>
                                                    <label for="filter-to" class="input-group-addon btn btn-default"><span class="fa fa-calendar"></span></label>
                                                </div>
                                            </div>
                                                
                                        <div class="col-md-2">
                                            <label class="control-label">How much?</label>
                                            <label class="sr-only">Currency</label>
                                            <input name="qty_from" id="filter-howmuch-from" type="number" placeholder="From" class="form-control mb16" autocomplete="on" t-att-value="request.httprequest.args.get('qty_from','')"/>
                                            <input name="qty_to" id="filter-howmuch-to" type="number" placeholder="To" class="form-control mb16" autocomplete="on" t-att-value="request.httprequest.args.get('qty_to','')"/>
                                        </div>
        
                                        <!-- python code to get currencies -->
                                        <t t-set="currencies_obj" t-value="request.registry['account.centralbank.config.currency']"/>
                                        <t t-set="currency_info_ids" t-value="currencies_obj.search(request.cr, request.uid, [], context=request.context)"/>
                                        <t t-set="currencies" t-value="currencies_obj.read(request.cr, request.uid, currency_info_ids, ['currency_id'], context=request.context)"/>
                                        <div class="col-md-2">
                                            <label class="control-label"> </label>
                                            <select name="cur_from" class="selectpicker form-control mb16" style="display: none;">
                                                <t t-foreach="currencies or []" t-as="c">
                                                    <option t-att-value="c['currency_id'][0]" t-att-selected="'selected' if int(request.httprequest.args.get('cur_from',0)) == c['currency_id'][0] else None"><t t-esc="c['currency_id'][1]"/></option>
                                                </t>
                                            </select>
        
                                            <select name="cur_to" class="selectpicker form-control" style="display: none;">
                                                <t t-foreach="currencies or []" t-as="c">
                                                    <option t-att-value="c['currency_id'][0]" t-att-selected="'selected' if int(request.httprequest.args.get('cur_to',0)) == c['currency_id'][0] else None"><t t-esc="c['currency_id'][1]"/></option>
                                                </t>
                                            </select>
                                        </div>
                            
                                        <div class="col-md-1">
                                            <label class="control-label"> </label>
                                            <div class="clearfix"></div>
                                            <button class="btn btn-primary" type="submit"><span class="fa fa-search"></span></button>
                                        </div>
                                                    
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </form>
            </section>
        </template>
    </data>
</openerp>